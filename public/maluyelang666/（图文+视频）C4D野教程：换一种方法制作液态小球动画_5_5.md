![](https://pic2.zhimg.com/v2-b8bb8c929647c06beaee93a42da204d5_r.jpg)

假期结束了，其实十一期间除了2号去草莓音乐节没买到票，然后4号转战了仙人掌之外，我一直在家里学习：

![](https://pic3.zhimg.com/v2-d84980e6e64bd225df72eb6b1670469e_r.jpg)![](https://pic3.zhimg.com/v2-65339f22dd6f85e61f15501fcbe25a22_r.jpg)

**前一段时间我是先把R20的体积对象以及域都简单的过了一遍，但是由于R20不能用OC欢乐版3.07，所以这几天我又只有把RS过了一遍。**

但是光是走马观花的过一遍还是不行，很容易忘记，所以还是想写点什么出来加深自己的印象。

之前有写过一个简单的液态小球的动画案例：

[](https://zhuanlan.zhihu.com/p/109994437)

当时我是R19利用一款叫做Proc3durale2的插件制作的动画，然后用OC3.07渲染出来的，文章里也有提到这个效果是可以用R20制作出来：

![](https://pic2.zhimg.com/v2-c6ab1426aa3c0340eb24d90750644fdd_r.jpg)

R20的体积对象功能很强大，它不仅可以支持几何体，运动图形还可以支持域，域我这里的简单理解就是更加强大的衰减功能。

因此以前需要借助一些小插件来完成的效果，R20很容易就可以做出来，这里强烈推荐大家去学习R20的新功能。

**如果用R20来制作这个液体小球效果，我感觉它们背后的原理是一样的，首先通过体积生成读取了噪波数据，然后通过体积网格把数据实体化。**

只是插件把中间的一些步骤省略了，更加方便，但是可控性就没有那么高。

**来吧，今天我们就用R20以及RS来制作液态小球动画吧！**

![](https://pic2.zhimg.com/v2-29972d51c8ff091e19931910625efd1d_r.jpg)

**开始之前还是再啰嗦一句，因为我也是刚开始学习R20的新功能以及RS，所以过程中如果有理解不到位或者错误的地方，欢迎大家帮忙修正。**

打开C4D，先设置动画的长度吧，帧速率25，180帧：

![](https://pic4.zhimg.com/v2-3f43f743522867767e62a34c31980577_r.jpg)

新建一个随机域，这里你用着色器域也是可以的，但是我个人觉得用随机域制作循环动画会方便一些：

![](https://pic1.zhimg.com/v2-d77479ed3f8392243fd33c4d1d3bb448_r.jpg)

为了方便观察我们可以先新建一个体积生成让它成为随机域的父级，尺寸可以稍微小一点，这样精度高一些：

![](https://pic2.zhimg.com/v2-03929df859d3fd8c869ca3b03e251069_r.jpg)

再新建一个球体，改为二十面体，分段稍微高一些：

![](https://pic2.zhimg.com/v2-bec470b006da2872b262720917ec615d_r.jpg)

同样让它成为体积生成的子集，然后对象栏位模式里改为相交，这样球体和随机域生成的相交的部分就会显示出来：

![](https://pic2.zhimg.com/v2-ee7ff6b2ccc8e2b29fd084755e6e3e79_r.jpg)

然后回到随机域里，将模式改为噪波，噪波类型大家就根据自己的喜好选一个就好了，比例数值可以大一些：

![](https://pic4.zhimg.com/v2-05c30a1489bfba0236ed71fe50d5fa27_r.jpg)

送花种子控制着动画的速度，由于我们是0到180帧，也就是总共181帧，所以循环周期直接设置为181就是循环动画了：

![](https://pic1.zhimg.com/v2-e68b9c9fb186535db19da2fc9df22db8_r.jpg)

体积生成里再添加一个平滑层，液态小球的感觉就出来了：

![](https://pic2.zhimg.com/v2-089ead58092478bf4418ea86b6c92735_r.jpg)

但是现在体积生成其实只是一堆数据，是无法渲染出来的，所以需要再添加一个体积网格，这个有点类似XP粒子的OpenVdbMesher：

![](https://pic2.zhimg.com/v2-c65f6b52e81aa1666d15077eb1360421_r.jpg)

但是现在动画播放起来是很卡的，并不方便后面的操作，R20的一个新的工作流程可以选中体积网格以后鼠标右键烘焙为ABC文件：

![](https://pic3.zhimg.com/v2-f9b357431749029f69d656b88551fa4e_r.jpg)

直接选择一个文件存放路径就可以烘焙了：

![](https://pic4.zhimg.com/v2-3b6d91062370ed5f2e5b6b4386781a8b_r.jpg)

烘焙完毕以后，将之前的体积对象都关掉，这样播放起来就不卡了：

![](https://pic3.zhimg.com/v2-0ccd33c43419d80e3433935c647ce1f2_r.jpg)

接下来就和以前的液态小球一样，各个轴向上去K旋转然后将运动曲线改为线性：

![](https://pic1.zhimg.com/v2-e238a6542fa11078dd33cb1acf4b3bb8_r.jpg)

还是一样新建一个大一点的球体，K旋转动画改为线性，这个就不多说了哈：

![](https://pic2.zhimg.com/v2-244a5f5111bd9f612d5b23ff7c66a23d_r.jpg)

接下来进入渲染部分了，打开RS，暂时给一个穹顶光照亮场景，这个相当于是OC的HDRI环境光：

![](https://pic4.zhimg.com/v2-cb2c76bc1055879f63e7190c064bc87f_r.jpg)

**老实说RS功能上比OC要强很多，但是使用起来确实没有OC方便，所以OC出图的速度会高于RS。**

因此RS给我们做了一些材质的预设，由于我也是刚开始学习RS，为了熟悉操作我就从普通的材质开始创建吧：

![](https://pic2.zhimg.com/v2-75e1a897281f7a44c026bcd894b5a381_r.jpg)

**中间的液态小球我们还是和以前一样做成sss材质，OC里我们通常创建sss材质会新建一个透明材质。**

RS也是一样，将漫射的强度关掉，将折射的强度打开，我习惯性的会给反射一丢丢粗糙：

![](https://pic3.zhimg.com/v2-7578b9e2667ecd8384bf4f7a76672682_r.jpg)

然后通过下方的透射颜色、吸收尺寸以及散射尺寸来控制sss的效果，尺寸的数值记得要微调哦：

![](https://pic4.zhimg.com/v2-18ec107a87c30aa1493a23dfe9ccdd67_r.jpg)

为了方便看效果，可以给穹顶光一个HDRI贴图：

![](https://pic2.zhimg.com/v2-ab31731151e24a7bb5a8cc0edee32a05_r.jpg)

之前的液态小球外面是一个带色散的玻璃材质，我们这里也这么弄，新建材质，将漫射关掉，折射打开，反射里提高粗糙度，IOR可以控制反射率和折射率：

![](https://pic3.zhimg.com/v2-2503cf5c4e500c318115d250e3190162_r.jpg)

折射里也有一个分散数值，给一定的数值就有色散的效果了：

![](https://pic2.zhimg.com/v2-54d26e9178517c4d62198e93a57f0359_r.jpg)

材质就到这里差不多吧，然后新建摄像机固定视角这一步不用说哈，OC也是一样的：

![](https://pic1.zhimg.com/v2-659e3238b27020d87536a8bbc88068f4_r.jpg)

摄像机里这里多说一句，RS的摄像机有一个很方便的小功能，预览视窗上有一个小锁的按钮：

![](https://pic1.zhimg.com/v2-6a6b000429ccf2f1e088afe0034d6d24_r.jpg)

点击以后退出摄像机视角，渲染预览框会锁定在摄像机视角，方便我们打灯光，这一点比OC方便很多：

![](https://pic4.zhimg.com/v2-685a698851865ccf7a96e74040553b1b_r.jpg)

灯光方面我把穹顶光关了，然后再小球的背后给了一个区域光，RS的灯光里有一个小三角，点开可以直接添加目标标签和空对象：

![](https://pic2.zhimg.com/v2-086012994a467a4b84054c6077912ec5_r.jpg)

再补两盏灯吧，这个都是看着效果来的，另外我觉得灯光反射在球体上的效果太明显了：

![](https://pic3.zhimg.com/v2-8a8e18a4d61c9d76818d4837325f0192_r.jpg)

于是我在射线栏位里把光泽的参数降低了一些：

![](https://pic4.zhimg.com/v2-360d46a0f6653ae38a2e390af0317e2b_r.jpg)

**到此材质和灯光都搞定了，和OC不一样的是我们这里看到的结果其实和最终渲染的结果是不一样的。**

要看到最终效果我们可以点击这个版块渲染，这里可以看到有很多噪点：

![](https://pic3.zhimg.com/v2-a26cf22b0269d4c348bc620b567b91d6_r.jpg)

因此我们需要做一些渲染设置，将渲染器切换为RS渲染器，我这里将最小采样和最大采样都提高了一些，这样噪点就变少了：

![](https://pic3.zhimg.com/v2-24edd4afadc13bdaea4c168ed308dbb6_r.jpg)

但是还是会有一些噪点，所以我又把降噪功能打开，这样基本就看不出什么噪点了：

![](https://pic4.zhimg.com/v2-51d867111eae4fa5d45ab85e9c944743_r.jpg)

**由于我还是希望把图片分个层渲染出来以后在AE里换个渐变的背景，添加一些发光效果啥的。**

RS分层出来的比如折射层，高光层等不能像OC一样直接渲染透明背景，所以我给两个对象都添加了RS的对象标签：

![](https://pic4.zhimg.com/v2-e919bc99ff6b1f202010a57ec86ea687_r.jpg)

对象ID里设置为1：

![](https://pic1.zhimg.com/v2-49b84c109184577fd2e0daec3f21ebe4_r.jpg)

RS的分层渲染感觉比要OC麻烦一些，需要把这个AOV Manager打开：

![](https://pic4.zhimg.com/v2-5cf20396832075a1c74f082e10456683_r.jpg)

然后把你需要渲染的分层拖进去，我这里就只弄了折射、高光以及puzzlematte，当你添加了分层以后，预览框这里可以切换观察分层的效果：

![](https://pic4.zhimg.com/v2-3a5358f11e7054567ce3297789f787df_r.jpg)

这里我们把Multi-Pass改为Direct，不然到了AE里还要把每个分层提取出来很麻烦，折射层里我同样勾选了降噪：

![](https://pic1.zhimg.com/v2-0e034f94981225249e814cde8b148488_r.jpg)

puzzlematte里把模式改为对象ID，然后各个通道都输入1：

![](https://pic1.zhimg.com/v2-64f4f53bc31f7d6213f90377ca33c1a8_r.jpg)

保存里设置我们渲染图的保存路径，分层序列会自动也都保存在这个路径里。

**另外我发现一个奇怪的点是我们分层里虽然没有设置，但只要你设置了分层，RS会自动渲一个Beauty层出来。**

我暂时没找到取消自动渲染Beauty层的方法，大家不管它吧：

![](https://pic4.zhimg.com/v2-213a7075d38ced6623dc74dbefe270c3_r.jpg)

这个动画总共渲染时间是接近3个小时，感觉应该比OC要快一些，难怪很多人说RS特别适合做动画：

![](https://pic2.zhimg.com/v2-694b833b3e2290f9a8331aa2e4733861_r.jpg)

至于后期在AE里调色那些我这里就不说啦，反正操作和以前没啥区别，今天的篇幅已经够长了，最后看看成品图吧：

![](https://pic4.zhimg.com/v2-16a37ca322cfd07459ed9d4cfe99b423_r.jpg)

和以前的没啥区别吧，下面是今天的视频版：

[](https://www.zhihu.com/zvideo/1297936661205041152)

好啦，今天的内容就到这里，想要源文件、原视频的童鞋**后台撩我**获取吧！

更多内容欢迎关注公众号：  

公众号：野鹿志

老鹿微信：maluyelang6661

苦七微信：766057766

本文由“野鹿志”发布

转载前请联系马鹿野郎

私转必究