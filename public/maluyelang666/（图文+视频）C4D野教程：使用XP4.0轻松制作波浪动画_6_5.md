![](https://pic3.zhimg.com/v2-005f3e5ff545bd3d421186096b2b29ee_r.jpg)

周六的时候出去放风一天，结果一不小心把脚扭了，结果在家躺了两天，阿西bug：

![](https://pic3.zhimg.com/v2-de5fadbfbd1559850a92732bc293cf5a_r.jpg)

来看问题吧，之前10群的鹿友问了一个效果：

![](https://pic2.zhimg.com/v2-1f612589b2baea0fa03c109e60d22211_r.jpg)

我把它压缩成动图大家看看吧：

![](undefined)

这个很像以前写过的一篇咸鸭蛋掉进海带帘的效果：

[](https://zhuanlan.zhihu.com/p/43238152)

当时我是用的海洋插件HOT4D制作的，其实使用这个插件海洋上面的泡沫也是可以制作出来的。

**但由于当时没有深入的学习，所以泡沫我是用的一个贴图来做的，看起来就有点假。**

前一段时间不是写了XP4.0申请试用版的方法么：

[](https://zhuanlan.zhihu.com/p/129033438)

从那之后我就一直在学习XP4.0的内容，刚好鹿友问到这个效果，我觉得可以试试用XP4.0来做一下。

开始之前先说一下我个人对于XP4.0的学习心得吧，由于XP粒子插件本身功能非常的强大，并且4.0的参数非常多。

**所以我们学习的时候需要理清学习思路，先对插件的工作流程有个大致的了解然后再去针对性的学习，没有必要每一个地方都去深究，因为我们不是每一个功能都会用到，并且这样很容易学完不久就忘记了。**

教程方面当然首推的是灰猩猩的XP粒子教程，B站上一搜就能搜到。

**教程优点是作者并不是单纯的讲解工具的使用，在此之上会有一定的拓展，例如在模拟雨，雪等场景时，参数的设定是基于真实的物理现象来设定参数。**

缺点当然是只有机翻的字幕，并且每一节都很长，需要赖着性子看完，除此之外由于教程使用的并不是最新版的XP4.0，所以有少许新功能就没有讲：

![](https://pic1.zhimg.com/v2-cee242c3288809d6a8317b81e10f2a5c_r.jpg)

另外推荐的是XP官方教程，这里感谢**@威力男孩**的汉化以及分享，这套教程的每一节都短小精干，很适合当作XP粒子的说明书来使用：

![](https://pic2.zhimg.com/v2-5c67287dc6b4f35c06c9ce068cc09301_r.jpg)

除此之外在插件许多工具的下方都有一个问号以及视频的按钮：

![](https://pic4.zhimg.com/v2-6aa2fd7533ac95cc1fd48634db055f77_r.jpg)

点击问号会弹出网页版的官方使用说明，可以搭配谷歌网页翻译进行学习：

![](https://pic3.zhimg.com/v2-9eb568e6db45198170da19b7586028de_r.jpg)

点击视频按钮会弹出工具的视频介绍，当然内容是和威力男孩翻译的官方教程是一样的：

![](https://pic1.zhimg.com/v2-aae732d8f5f0963d1f6b7a6b6c548e88_r.jpg)

今天的效果我尝试了一下，其实用XP4.0的新功能是非常容易做出来的。

**好了，啰嗦完了进入正题，来看看如何使用XP4.0轻松制作海浪效果吧！**

![](https://pic2.zhimg.com/v2-29972d51c8ff091e19931910625efd1d_r.jpg)

先做场景的准备工作吧，打开C4D，新建一个立方体，调整一下尺寸：

![](https://pic3.zhimg.com/v2-60a41aa71431efd485bcb14ae48e0dce_r.jpg)

给立方体添加一个显示标签，着色模式改为网线，这样方面后面观察：

![](https://pic2.zhimg.com/v2-2f0db24898b31d57d1ae9f9628fea021_r.jpg)

再给立方体添加XP的碰撞标签，将模式改为内部，反弹关掉：

![](https://pic4.zhimg.com/v2-17ca20d306e7f196a5af95d13aacef1f_r.jpg)

新建一个发射器，我这里用的是试用版，需要等30秒广告，没办法，谁叫咱没钱呢：

![](https://pic3.zhimg.com/v2-cd8b455ae5752304b47e0db346695db6_r.jpg)

发射器形状改为盒状，适当的调整发射器的尺寸：

![](https://pic4.zhimg.com/v2-8810d6a625527d5d5df8f9892e906c7f_r.jpg)

发射器面板里模式改为六边形，这个是XP4.0新增的一种模式，官方介绍这种发射器类型特别适用于流体的模拟，让发射器只发射一帧，将速度改为0：

![](https://pic2.zhimg.com/v2-fee3f0ac53309837137808d4a7e18401_r.jpg)

给场景添加一个重力，参数默认即可：

![](https://pic1.zhimg.com/v2-c2b97a96e631096475cc6075e7243ec8_r.jpg)

给粒子添加XP动力学里的xpFluidFX，这个也是XP4.0新增的模拟流体的功能，参数默认即可，这样粒子就有了流体的形态，为了方便观察，我这里将粒子显示的颜色更改了一下：

![](https://pic2.zhimg.com/v2-acc9293642afb2976650b1087461fa85_r.jpg)

给粒子添加一个xpWave，这个同样是XP4.0新增的功能，专门用于模拟波浪，原理非常简单，就是通过噪波贴图来影响粒子整体的形态，参数大家看着效果调整就好：

![](https://pic4.zhimg.com/v2-3f42adf9f9b393119b3c34d1cfe7e33b_r.jpg)

**接着再添加一个XP4.0的新功能xpFoam，这个就是专门模拟海浪泡沫的工具了。**

由于泡沫其实也是粒子，所以需要在面板里点击Create创建一个发射器，XP4.0的功能确实很强大，老实说我觉得默认的参数效果就都已经够好了：

![](https://pic2.zhimg.com/v2-140170a342e9873a32455e75562ba3bd_r.jpg)

**然后就是需要将海浪网格化了，添加一个xpOVDBMesher，这个功能和skinner很像，但是更加快捷方便。**

把海浪的发射器拖进xpOVDBMesher里，适当的调整体素的尺寸以及点的半径：

![](https://pic3.zhimg.com/v2-1493aed7264d627065ff412394a720de_r.jpg)

可以视情况给网格添加滤镜，这样网格会看起来更平滑：

![](https://pic4.zhimg.com/v2-7e2cb3cfdeeaf8a703fa2b0cf64b07ff_r.jpg)

再新建一个平面，添加碰撞标签，这一步不用说吧：

![](https://pic2.zhimg.com/v2-f3afd422da7ae6005717c9d5e7d28f79_r.jpg)

形态调整的差不多了就可以将粒子进行缓存了，这样播放起来就不会卡，方便后面调整材质渲染：

![](https://pic4.zhimg.com/v2-8db0891232ec81ca38bd26c646c19f83_r.jpg)

下面就是渲染了，打开OC，我直接使用的是日光，调整光的强度、尺寸以及太阳的颜色等，这都不用说吧：

![](https://pic2.zhimg.com/v2-167bf320ed2fa2cd2afd2345aa020d2d_r.jpg)

新建摄像机固定视角这个也不用说吧：

![](https://pic4.zhimg.com/v2-9f85e7f9a33f30dc00629e5bc4471013_r.jpg)

材质方面波浪的材质就是一个透明材质球制作的次表面反射材质，勾选伪造阴影，一丢丢的粗糙度，通过传输通道来控制材质的颜色：

![](https://pic2.zhimg.com/v2-799a39056e2403b0e35944e53ad7cead_r.jpg)

这样水面我觉得过于平整了，所以在凹凸通道添加了一个湍流的节点，然后通过反向节点连接上，感觉是我想要的效果：

![](https://pic4.zhimg.com/v2-a5c52c1ace6ac5dc3eeef8e50d6eceab_r.jpg)

视情况我在顶部又补了一盏灯：

![](https://pic4.zhimg.com/v2-255a72ef7e049a54db5b57178274d97b_r.jpg)

接下来就是渲染泡沫了，给泡沫的发射器添加oc对象标签，将粒子渲染改为球体：

![](https://pic1.zhimg.com/v2-1a0adbc0a5d09080df152f9e38d6a400_r.jpg)

然后再新建一个球体拖进粒子渲染面板，通过这个球体的大小来控制泡沫的大小：

![](https://pic4.zhimg.com/v2-d18d82a9d1ca913356252e354595ff1b_r.jpg)

泡沫的材质就是一个普通的白色漫射材质：

![](https://pic4.zhimg.com/v2-a238854563a5afd732d51a719dccfd23_r.jpg)

地面就是一个普通的漫射材质，在Common里勾选Matte，让它只接收投影：

![](https://pic1.zhimg.com/v2-96b3afce39e1e2e0093df4777ae546d0_r.jpg)

差不多就可以渲染出图了，我的个人建议是还是分层渲染，后期想要调节也比较方便：

![](https://pic3.zhimg.com/v2-c2b9700f1e861af8b44fa77872e15856_r.jpg)

渲染的时间还是挺长的，差不多20个小时，本来想扔农场渲的，但是农场都不支持XP4.0，貌似这种没有欢乐版的插件都很少有农场支持啊：

![](https://pic2.zhimg.com/v2-34e3092da1c4f70af513eb38b3a70ced_r.jpg)

最后可以在AE里后期用插件添加运动模糊啥的，看看效果吧：

![](undefined)

总的来说今天的效果用XP4.0是很好做出来的，就是渲染比较慢，下面是今天的视频版：

[![](https://pic4.zhimg.com/v2-d749587de201397532e0dd4afab2dace.png)](https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/1247592610077487104)

**经过测试，好像使用XP4.0试用版的工程文件别的电脑打不开，可能是序列号的问题，我这边还是发出来，大家也可以测试一下。**

好啦，今天的分享就到这里，想要源文件以及原视频的童鞋后台**撩我**获取吧！

更多内容欢迎关注公众号：  

老鹿微信：maluyelang6661

苦七微信：766057766

本文由“野鹿志”发布

转载前请联系马鹿野郎

私转必究